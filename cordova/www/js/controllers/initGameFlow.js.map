{"version":3,"sources":["initGameFlow.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","initGame","gameSet","R","compose","generateWrongAnswerData","generateGameSet","images","renderGamePages","eventListenerGamePage","forEach","el","i","$","find","click","event","hide","Number","show","direction","userGuess","innerHTML","results","push","initRoundResult","answerType","randomiser2","append","Handlebars","compile","pages","id","biggie","keys","choiceL","String","emojiPath","buttonL","emotion","choiceR","buttonR","renderResPages","attr","username","arguments","length","undefined","randomiser","map","array","_ref","apiWinner","index","wrongAnswer","getOtherEmotion","correctAnswer","pos","emotions","splice","indexOf","randomNumber","Math","random","sort","slice","dict","scores","tempNumber","prop","includes","eventListenerResultPages","playAgain","lifeTime","roundResults"],"mappings":"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","file":"initGameFlow.js","sourcesContent":["'use strict';\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction initGame() {\n\n  var gameSet = R.compose(generateWrongAnswerData, generateGameSet)(images);\n  renderGamePages(gameSet);\n  eventListenerGamePage(gameSet);\n}\n\nfunction eventListenerGamePage(gameSet) {\n  [1, 2, 3, 4, 5].forEach(function (el, i) {\n    if (el < 5) {\n      $('#gamePage' + el).find('button').click(function (event) {\n        $('#gamePage' + el).hide();\n        $('#gamePage' + (Number(el) + 1)).show(\"slide\", { direction: \"left\" }, 500);\n        gameSet[i].userGuess = $(this)[0].innerHTML;\n        results.push(gameSet[i]);\n      });\n    } else {\n      $('#gamePage' + el).find('button').click(function (event) {\n        gameSet[i].userGuess = $(this)[0].innerHTML;\n        results.push(gameSet[i]);\n        initRoundResult(results, el);\n      });\n    }\n  });\n}\n\n//\n//Main functions\n//\n\nfunction renderGamePages(gameSet) {\n  [1, 2, 3, 4, 5].forEach(function (el, i) {\n    var answerType = randomiser2();\n    $('#main').append(Handlebars.compile(pages['gamePage'])({\n      id: 'gamePage' + el,\n      biggie: 'assets/imgs/' + Object.keys(gameSet[i])[0] + '.jpg',\n      choiceL: String(gameSet[i][answerType[0]].emojiPath),\n      buttonL: gameSet[i][answerType[0]].emotion[0],\n      choiceR: String(gameSet[i][answerType[1]].emojiPath),\n      buttonR: gameSet[i][answerType[1]].emotion[0]\n    }));\n  });\n}\nfunction renderResPages(gameSet) {\n  [1, 2, 3, 4, 5].forEach(function (el, i) {\n    $('#res' + el).find('img').attr('src', 'assets/imgs/' + Object.keys(gameSet[i])[0] + '.jpg');\n  });\n}\n\nfunction generateGameSet(images) {\n  var username = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'john doe';\n\n  return randomiser(images).map(function (el, i, array) {\n    var _ref;\n\n    return _ref = {}, _defineProperty(_ref, el, images[el][0]), _defineProperty(_ref, 'userGuess', 'noresponse'), _defineProperty(_ref, 'username', username), _defineProperty(_ref, 'apiGuess', apiWinner(images[el][0]['scores'])), _defineProperty(_ref, 'correctAnswer', {\n      emotion: apiWinner(images[el][0]['scores']),\n      emojiPath: 'assets/icons/' + emojiPath(apiWinner(images[el][0]['scores'])[0])\n    }), _ref;\n  });\n}\n\n//\n//generic helpers\n//\n\nfunction generateWrongAnswerData(gameSet) {\n  return gameSet.map(function (el, index) {\n    el.wrongAnswer = {\n      emotion: [getOtherEmotion(el.correctAnswer['emotion'][0])],\n      emojiPath: 'assets/icons/' + emojiPath(getOtherEmotion(el.correctAnswer['emotion'][0]))\n    };\n    return el;\n  });\n}\n\nfunction getOtherEmotion(emotion, pos) {\n  var emotions = ['happiness', 'sadness', 'anger', 'neutral', 'surprise'];\n  emotions.splice(emotions.indexOf(emotion), 1);\n  return emotions[2];\n\n  function randomNumber() {\n    return ~~(Math.random() * 5);\n  }\n}\n\nfunction randomiser(images) {\n  return Object.keys(images).sort(function () {\n    return .5 - Math.random();\n  }).slice(0, 5);\n}\n\nfunction emojiPath(emotion) {\n  var dict = {\n    'anger': 'angry-emoji.svg', 'sadness': 'sad-emoji.svg', 'surprise': 'surprise-emoji.svg', 'neutral': 'neutral-emoji.svg', 'happiness': 'happy-emoji.svg' };\n  return dict[emotion];\n}\n\nfunction apiWinner(scores) {\n  var tempNumber = 0;\n  var emotion = void 0;\n  for (prop in scores) {\n    if (scores[prop] > tempNumber && String(scores[prop]).includes('-') === false) {\n      tempNumber = scores[prop];\n      emotion = prop;\n    }\n  }\n  return [emotion, tempNumber];\n}\n\nfunction eventListenerResultPages() {\n  playAgain();\n  lifeTime();\n  roundResults();\n}\n\nfunction randomiser2() {\n  var dict = ['correctAnswer', 'wrongAnswer'];\n  if (Math.random() > 0.5) {\n    return dict;\n  } else {\n    return [dict[1], dict[0]];\n  }\n}\n//# sourceMappingURL=initGameFlow.js.map\n"]}